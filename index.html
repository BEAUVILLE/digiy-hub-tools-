<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>DIGIY ‚Äî Installer l‚Äôapp</title>
  <meta name="theme-color" content="#16a34a"/>
  <style>
    :root{--bg:#061b14;--card:#0b2a1f;--line:rgba(255,255,255,.14);--text:#eafff1;--muted:rgba(234,255,241,.75);--radius:18px}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px}
    .card{width:min(520px,100%);background:rgba(255,255,255,.06);border:1px solid var(--line);border-radius:var(--radius);padding:16px}
    h1{margin:0;font-size:18px;font-weight:950}
    p{margin:10px 0 0;color:var(--muted);font-weight:800;line-height:1.35}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{border:none;border-radius:14px;padding:12px 14px;font-weight:950;cursor:pointer}
    .primary{background:linear-gradient(135deg,#16a34a,#22c55e);color:#052e16}
    .ghost{background:transparent;color:var(--text);border:1px solid var(--line)}
    .note{margin-top:10px;font-size:12px;color:rgba(234,255,241,.7);font-weight:800}
  </style>
</head>
<body>

  <div class="card">
    <h1>üì≤ Installer DIGIY</h1>
    <p>
      Pour Android (Chrome) : quand le bouton ‚ÄúInstaller‚Äù appara√Æt, clique dessus.<br/>
      Sinon : menu ‚ãÆ ‚Üí <b>Ajouter √† l‚Äô√©cran d‚Äôaccueil</b>.
    </p>

    <div class="row">
      <button class="btn primary" id="installBtn" type="button">Installer</button>
      <a class="btn ghost" href="./" style="text-decoration:none;display:inline-flex;align-items:center;justify-content:center;">Retour</a>
    </div>

    <div class="note" id="msg">Astuce : l‚Äôinstallation marche mieux apr√®s 1-2 visites.</div>
  </div>

  <!-- Ton script PWA -->
  <script src="./pwa-install.js"></script>

  <!-- Petit fallback si ton script ne g√®re pas tout -->
  <script>
    // Si ton pwa-install.js expose deferredPrompt, on peut l'utiliser.
    const msg = document.getElementById("msg");
    const btn = document.getElementById("installBtn");

    btn.addEventListener("click", async ()=>{
      // Si pwa-install.js g√®re d√©j√† l'install, il prendra le relais.
      if(window.deferredPrompt){
        window.deferredPrompt.prompt();
        const choice = await window.deferredPrompt.userChoice;
        msg.textContent = (choice && choice.outcome === "accepted")
          ? "‚úÖ Installation lanc√©e."
          : "‚ÑπÔ∏è Installation annul√©e.";
        window.deferredPrompt = null;
      }else{
        msg.textContent = "‚ÑπÔ∏è Si le bouton n‚Äôappara√Æt pas, ouvre le menu ‚ãÆ puis ‚ÄòAjouter √† l‚Äô√©cran d‚Äôaccueil‚Äô.";
      }
    });
  </script>
</body>
</html>
